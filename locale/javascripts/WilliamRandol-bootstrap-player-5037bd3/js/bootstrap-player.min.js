!function(t){"use strict";t("audio[controls]").before(function(){var e=this;e.controls=!1;var n=document.createElement("div");t(n).addClass(t(e).attr("class")+" well container-fluid playa");var a=document.createElement("section");t(a).addClass("collapse");var i=document.createElement("div");t(i).addClass("btn-group row-fluid");var o=document.createElement("a");t(o).html('<i class="icon-reorder"></i>'),t(o).addClass("btn btn-block"),t(o).attr("style","opacity:0.3"),t(o).click(function(){t(a).collapse("toggle")}),t(o).attr("title","Details"),t(o).tooltip({container:"body",placement:"top",html:!0}),t(i).append(o);var l=document.createElement("table");t(l).addClass("table table-condensed");var d=document.createElement("section");t(d).addClass("btn-group row-fluid");var r=function(){console.log("error"),t(n).find(".btn").addClass("disabled"),t(n).find('input[type="range"]').hide(),t(n).find(".icon-spin").text("Error"),t(n).find(".icon-spin").parent().attr("title","There was an error loading the audio."),t(n).find(".icon-spin").parent().tooltip("fixTitle"),t(n).find(".icon-spin").removeClass("icon-spinner icon-spin")},c=function(){var n=document.createElement("button");t(n).addClass("btn disabled span1"),n.setPlayState=function(a){t(n).removeClass("disabled"),"play"===a&&(t(n).html('<i class="icon-play"></i>'),t(n).click(function(){e.play()})),"pause"===a&&(t(n).html('<i class="icon-pause"></i>'),t(n).click(function(){e.pause()}))},t(e).on("play",function(){n.setPlayState("pause")}),t(e).on("canplay",function(){n.setPlayState("play")}),t(e).on("pause",function(){n.setPlayState("play")});var a=0,i=setInterval(function(){return isNaN(e.duration)===!1?(n.setPlayState("play"),clearInterval(i),!0):3===e.networkState||75===a?(r(),clearInterval(i),!1):void a++},50);t(d).append(n)},s=function(){var n=document.createElement("input");t(n).attr({type:"range",min:0,value:0,"class":"seek"}),n.progress=function(){var a="rgba(223, 240, 216, 1) 0%";a+=", rgba(223, 240, 216, 1) "+e.currentTime/e.duration*100+"%",a+=", rgba(223, 240, 216, 0) "+e.currentTime/e.duration*100+"%";for(var i=0;i<e.buffered.length;i++)if(e.buffered.end(i)>e.currentTime&&isNaN(e.buffered.end(i))===!1&&isNaN(e.buffered.start(i))===!1){var o,l;l=e.buffered.end(i)<e.duration?e.buffered.end(i)/e.duration*100:100,o=e.buffered.start(i)>e.currentTime?e.buffered.start(i)/e.duration*100:e.currentTime/e.duration*100,a+=", rgba(217, 237, 247, 0) "+o+"%",a+=", rgba(217, 237, 247, 1) "+o+"%",a+=", rgba(217, 237, 247, 1) "+l+"%",a+=", rgba(217, 237, 247, 0) "+l+"%"}t(n).css("background","-webkit-linear-gradient(left, "+a+")"),t(n).css("background-color","#ddd")},n.set=function(){t(n).val(e.currentTime),n.progress()},n.slide=function(){e.currentTime=t(n).val(),n.progress()},n.init=function(){t(n).attr({max:e.duration,step:e.duration/100}),n.set()},n.reset=function(){t(n).val(0),e.currentTime=t(n).val(),e.loop?e.play():e.pause()};var a=document.createElement("div");t(a).addClass("btn disabled span4"),t(a).append(n),t(n).on("change",n.slide),t(e).on("timeupdate",n.init),t(e).on("loadedmetadata",n.init),t(e).on("loadeddata",n.init),t(e).on("progress",n.init),t(e).on("canplay",n.init),t(e).on("canplaythrough",n.init),t(e).on("ended",n.reset),e.readyState>0&&n.init(),t(d).append(a)},u=function(){var n=document.createElement("a");t(n).addClass("btn span3"),t(n).tooltip({container:"body",placement:"right",html:!0}),n.twodigit=function(t){return("0"+t).slice(-2)},n.timesplit=function(t){if(isNaN(t))return'<i class="icon-spinner icon-spin"></i>';var e=Math.floor(t/3600),a=Math.floor(t/60)-60*e,i=Math.floor(t)-3600*e-60*a,o=n.twodigit(a)+":"+n.twodigit(i);return e>0&&(o=e+":"+o),o},n.showtime=function(){t(n).html(n.timesplit(e.duration)),t(n).attr({title:'Click to Reset<hr style="padding:0; margin:0;" />Position: '+n.timesplit(e.currentTime)}),e.paused||(t(n).html(n.timesplit(e.currentTime)),t(n).attr({title:'Click to Reset<hr style="padding:0; margin:0;" />Length: '+n.timesplit(e.duration)})),t(n).tooltip("fixTitle")},t(n).click(function(){e.pause(),e.currentTime=0,n.showtime(),t(n).tooltip("fixTitle"),t(n).tooltip("show")}),t(n).tooltip("show"),t(e).on("loadedmetadata",n.showtime),t(e).on("loadeddata",n.showtime),t(e).on("progress",n.showtime),t(e).on("canplay",n.showtime),t(e).on("canplaythrough",n.showtime),t(e).on("timeupdate",n.showtime),e.readyState>0?n.showtime():t(n).html('<i class="icon-spinner icon-spin"></i>'),t(d).append(n)},m=function(){var n=document.createElement("button");t(n).addClass("btn span1"),n.checkVolume=function(){e.volume>.5&&!e.muted?t(n).html('<i class="icon-volume-up"></i>'):e.volume<.5&&e.volume>0&&!e.muted?t(n).html('<i class="icon-volume-down"></i>'):t(n).html('<i class="icon-volume-off"></i>')},t(n).click(function(){e.muted?(e.muted=!1,e.volume=e.oldvolume):(e.muted=!0,e.oldvolume=e.volume,e.volume=0),n.checkVolume()}),n.checkVolume(),t(e).on("volumechange",n.checkVolume),t(d).append(n)},p=function(){var n=document.createElement("input");t(n).attr({type:"range",min:0,max:1,step:.01,value:1}),n.slide=function(){e.muted=!1,e.volume=t(n).val()},n.set=function(){t(n).val(e.volume)};var a=document.createElement("div");t(a).addClass("btn disabled span3"),t(a).append(n),t(n).on("change",n.slide),t(e).on("volumechange",n.set),t(d).append(a)},f=function(){var n=document.createElement("img");t(n).addClass("thumbnail"),t(n).attr("src",t(e).data("infoAlbumArt")),t(a).append(n)},v=function(n,a){var i=document.createElement("tr"),o=document.createElement("th"),d=document.createElement("td");t(o).html(n),t(d).html(t(e).data(a)),t(i).append(o),t(i).append(d),t(l).append(i)},h=function(){"undefined"!=typeof t(e).data("infoAlbumArt")&&f(),"undefined"!=typeof t(e).data("infoArtist")&&v("Artist","infoArtist"),"undefined"!=typeof t(e).data("infoTitle")&&v("Title","infoTitle"),"undefined"!=typeof t(e).data("infoAlbumTitle")&&v("Album","infoAlbumTitle"),"undefined"!=typeof t(e).data("infoLabel")&&v("Label","infoLabel"),"undefined"!=typeof t(e).data("infoYear")&&v("Year","infoYear"),""!==t(l).html()&&(t(a).append(l),t(n).append(i),t(n).append(a))},b=function(){"off"!==t(e).data("play")&&c(),"off"!==t(e).data("seek")&&s(),"off"!==t(e).data("time")&&u(),"off"!==t(e).data("mute")&&m(),"off"!==t(e).data("volume")&&p(),t(n).append(d)},g=function(){var a=document.createElement("small");if(t(a).addClass("pull-right muted"),"undefined"!=typeof t(e).data("infoAttLink")){var i=document.createElement("a");t(i).addClass("muted"),t(i).attr("href",t(e).data("infoAttLink")),t(i).html(t(e).data("infoAtt")),t(a).append(i)}else t(a).html(t(e).data("infoAtt"));t(n).append(a)},y=function(){h(),b(),"undefined"!=typeof t(e).data("infoAtt")&&g()};return y(),t(e).on("error",function(){r()}),n})}(jQuery);